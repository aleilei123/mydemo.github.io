<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>doMove</title>
	<style>
	div{
		width: 100px;
		height: 100px;
		background-color: #090101;
		position: absolute;
		left: 10px;
		top:40px;
		opacity: 1;
	}
	</style>
	<script type="text/javascript" src="miaov.js"></script>
	<script type="text/javascript">
		window.onload=function(){
		
			var odiv=document.getElementsByTagName('div')[0];
			
			odiv.onclick=function(){
				changeopacity(this,0.1,0,function(){
					alert('成功');
				});
				// var opacityValue=getComputedStyle(odiv)[opacity];

			}
			function changeopacity(obj,dir,target,doFn){
				clearInterval(obj.timer);
				dir=(getStyle(obj,'opacity'))<target? -dir:dir;
	            obj.timer=setInterval(function(){
	            speed=getStyle(obj,'opacity')-dir;
	            if(speed>=target&&dir<0||speed<=target&&dir>0){
	            	speed=target;
	            	clearInterval(obj.timer);	
	            	doFn&&doFn();
	            }
	            obj.style['opacity']=speed;
	            	
	            },30);	
	           
			}

		
		
		}
	</script>
</head>
<body>
	<div></div>
</body>
</html>