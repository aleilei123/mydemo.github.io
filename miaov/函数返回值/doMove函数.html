<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>doMove</title>
	<style>
	div{
		width: 100px;
		height: 100px;
		background-color: #92EA81;
		position: absolute;
		left: 10px;
		top:40px;
	}
	</style>
	<script type="text/javascript">
		window.onload=function(){
			var abtn=document.getElementsByTagName('input');
			var odiv=document.getElementsByTagName('div')[0];
			
			abtn[0].onclick=function(){
				doMove(odiv,'top',29,40)
			}

			abtn[1].onclick=function(){
				doMove(odiv,'top',29,500);
			}
			abtn[2].onclick=function(){
				doMove(odiv,'left',29,500,function(){
					doMove(odiv,'height',29,300,function(){
						doMove(odiv,'left',29,20);
					});
				});
			}
			function doMove(obj,attr,dir,target,doFn){
				clearInterval(obj.timer);
				dir=parseInt(getStyle(obj,attr))<target?dir:-dir;
	            obj.timer=setInterval(function(){
	            speed=parseInt(getStyle(obj,attr))+dir; 
	            if(speed>=target&&dir>0||speed<=target&&dir<0){
	            	speed=target;
	            	clearInterval(obj.timer);
	            	doFn&&doFn();
	            }
	            obj.style[attr]=speed+'px';
	            
	            },100);	
			}

			function getStyle(obj,attr){
				return obj.currentStyle?obj.currentStyle[attr]:getComputedStyle(obj)[attr];
			}
		
		}
	</script>
</head>
<body>
	<input type="button" value="向前"></input>
	<input type="button" value="向后"></input>
	<input type="button" value="走"></input>
	<div></div>
</body>
</html>