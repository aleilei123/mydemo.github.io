<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>doMove应用</title>
	<script type="text/javascript" src="miaov.js"></script>
	<script type="text/javascript">
		window.onload=function(){
			

			var str='';
			var timer=null;
			var timer1=null;
			var num=0;
			for(var i=0;i<10;i++){
			 str+='<div style="width:50px;height: 50px;position: absolute;background-color: #21CD6A;top:10px;left:'+i*60+'px"></div>';
			}
			
			document.body.innerHTML=str;
            var adiv=document.getElementsByTagName('div');
            var onoff=true;
            
			document.onclick=function(){
				var nn=0;
				for(var i=0;i<adiv.length;i++){
					if(parseInt(adiv[i].style.top)==10||parseInt(adiv[i].style.top)==500){
						nn++;	
					}
					
				}
				if(nn==10){
				if(onoff){
	              clearInterval(timer);
	              timer=setInterval(function(){
	              doMove(adiv[num],'top',29,500);
	              num++;
	              if(num==10){
	              	num=0;
	              	onoff=false;
	              	clearInterval(timer);
	              }
	              },100);
              }else{
              	clearInterval(timer1);
	              timer1=setInterval(function(){
	              doMove(adiv[num],'top',29,10);
	              num++;
	              if(num==10){
	              	num=0;
	              	onoff=true;
	              	clearInterval(timer1);
	              }
	              },100);
              }
          }
            
			}

			function getStyle(obj,attr){
				return obj.currentStyle?obj.currentStyle[attr]:getComputedStyle(obj)[attr];
			}
           function doMove(obj,attr,dir,target){
				clearInterval(obj.timer);
				dir=parseInt(getStyle(obj,attr))<target?dir:-dir;
	            obj.timer=setInterval(function(){
	            speed=parseInt(getStyle(obj,attr))+dir; 
	            if(speed>=target&&dir>0||speed<=target&&dir<0){
	            	speed=target;
	            	clearInterval(obj.timer);
	            }
	            obj.style[attr]=speed+'px';
	            
	            },100);	
			}

		}
	</script>
</head>
<body>

</body>
</html>